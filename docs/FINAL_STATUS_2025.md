# –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞ cpp_ast_v3 (–û–∫—Ç—è–±—Ä—å 2025)

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –¢–µ—Å—Ç—ã
- **511/511 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)** ‚úÖ
- **+10 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è structured bindings (C++17)**

### gtk-gl-cpp-2025 –ü–∞—Ä—Å–∏–Ω–≥
- **13/40 —Ñ–∞–π–ª–æ–≤ (32.5%)** ‚úÖ
  - Headers –±–µ–∑ preprocessor: **10/10 (100%)**
  - .cpp —Ñ–∞–π–ª—ã: **3/20 (15%)**

### –£—Å–ø–µ—à–Ω–æ –ø–∞—Ä—Å—è—Ç—Å—è
‚úÖ **Headers:**
- include/core/app_state.hpp
- include/demos/demo_manager.hpp
- include/demos/demo_scene.hpp
- include/gl/buffer.hpp
- include/gl/shader.hpp
- include/text/text_constants.hpp
- include/text/texture_atlas.hpp
- include/widgets/demo_selector.hpp
- include/widgets/gl_area_widget.hpp
- include/widgets/log_view.hpp

‚úÖ **.cpp —Ñ–∞–π–ª—ã:**
- src/core/app_state.cpp
- src/gl/buffer.cpp
- src/gl/shader.cpp

## üéØ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞
- ‚úÖ –†–∞–∑–±–∏—Ç `declaration_parser.rb` (1173 ‚Üí 22 —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ –†–∞–∑–±–∏—Ç `lexer.rb` (674 ‚Üí 324 —Å—Ç—Ä–æ–∫–∏)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ `parsers/declaration/*.rb`

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- ‚úÖ **constexpr variables** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–µ–ª–æ–≤ –º–µ–∂–¥—É keywords
- ‚úÖ **Namespace body** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ trivia
- ‚úÖ **Rvalue references (&&)** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤ —Ç–∏–ø–∞—Ö –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö
- ‚úÖ **Out-of-line methods** - `Class::method()` pattern
- ‚úÖ **Keyword `this`** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –∏ return
- ‚úÖ **If statement trivia** - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ leading trivia
- ‚úÖ **Constructor initializer lists** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–æ–≤ –ø–µ—Ä–µ–¥ `:`
- ‚úÖ **Range-based for loops** - –ø–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ `for (decl : range)`
- ‚úÖ **Structured bindings (C++17)** - `auto& [k, v]` –≤ for loops

### 3. –ù–æ–≤—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ `test/integration/constexpr_variable_roundtrip_test.rb` (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ `test/integration/namespace_body_roundtrip_test.rb` (5 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ `test/integration/structured_bindings_test.rb` (10 —Ç–µ—Å—Ç–æ–≤)

## üìù –ö–æ–º–º–∏—Ç—ã —Å–µ—Å—Å–∏–∏

```
58a3e48 –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è structured bindings
bac9970 –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ range-based for –∏ structured bindings
b5b3daf –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å: 12/40 —Ñ–∞–π–ª–æ–≤ (30%)
27d01cd –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø—Ä–æ–µ–∫—Ç–∞
33d0d27 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å trivia –≤ control flow –∏ initializer lists
3aa1e60 –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ 'this' –≤ –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö
434ba20 –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ rvalue reference –∏ out-of-line method definitions
4401dea –ß–∞—Å—Ç–∏—á–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ namespace body parsing
6b66b03 –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å constexpr –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏
041515c –†–µ–æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: –ø–∞—Ä—Å–µ—Ä—ã –≤ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø–∞–ø–∫–∏
d9255b3 –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥: –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∞—É–¥–∏—Ç –ø—Ä–æ–µ–∫—Ç–∞
```

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. Preprocessor directives (–†–µ—à–µ–Ω–æ ‚úÖ)
Preprocessor directives (`#pragma`, `#include`, `#define`) —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ trivia –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ leading_trivia –ø–µ—Ä–≤–æ–≥–æ statement.

### 2. –°–ª–æ–∂–Ω—ã–µ —Ñ–∞–π–ª—ã (~27 —Ñ–∞–π–ª–æ–≤)
–ù–µ–∫–æ—Ç–æ—Ä—ã–µ .cpp —Ñ–∞–π–ª—ã —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏ –≤—Å–µ –µ—â–µ –∏–º–µ—é—Ç roundtrip mismatches:
- Multiple nested classes
- Complex template specializations
- Advanced C++17/20 features

**–ü—Ä–∏–º–µ—Ä—ã:**
- ‚ùå src/demos/demo_manager.cpp (—á–∞—Å—Ç–∏—á–Ω–æ –ø–∞—Ä—Å–∏—Ç—Å—è)
- ‚ùå include/demos/animated_triangle_demo.hpp (—Å–ª–æ–∂–Ω–æ–µ –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–º–±–∏–Ω–∞—Ü–∏—è edge cases —Ç—Ä–µ–±—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞

**–ü–æ–∫—Ä—ã—Ç–∏–µ –ø–æ—Å–ª–µ fix:** –û–∂–∏–¥–∞–µ—Ç—Å—è ~35/40 (87.5%)

## üéâ –ò—Ç–æ–≥–∏

–ü—Ä–æ–µ–∫—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ª—É—á—à–µ–Ω:
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–ª –±–æ–ª–µ–µ –º–æ–¥—É–ª—å–Ω—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–º
- ‚úÖ –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ C++ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–∞—Ä—Å—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (–≤–∫–ª—é—á–∞—è C++17)
- ‚úÖ 100% —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (511/511)
- ‚úÖ 32.5% —Ä–µ–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ gtk-gl-cpp-2025 –ø–∞—Ä—Å—è—Ç—Å—è —Å –ø–æ–ª–Ω—ã–º roundtrip
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ structured bindings (C++17)
- ‚úÖ Preprocessor directives —Ä–∞–±–æ—Ç–∞—é—Ç

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –¥–ª—è 85%+ –ø–æ–∫—Ä—ã—Ç–∏—è: **–∞–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è 27 failing —Ñ–∞–π–ª–æ–≤**.


#pragma once

#include <epoxy/gl.h>
#include <vector>
#include <span>

& operator=(const VertexArray&) = delete;

    // Move semantics
    VertexArray(VertexArray&& other) noexcept;
    & operator=(VertexArray&& other) noexcept;

    void bind() const;
    void unbind() const;

    GLuint handle() const noexcept { return vao_; }
    bool is_valid() const noexcept { return vao_ != 0; }

private:
    GLuint vao_ = 0;
};

/**
 * RAII wrapper for OpenGL Buffer Object
 */
& operator=(const Buffer&) = delete;

    // Move semantics
    Buffer(Buffer&& other) noexcept;
    & operator=(Buffer&& other) noexcept;

    void bind() const;
    void unbind() const;

    template<typename T>
    void data(std::span<const T> data, Usage usage = Usage::Static) {
        bind();
        glBufferData(static_cast<GLenum>(type_),
                     data.size_bytes(),
                     data.data(),
                     static_cast<GLenum>(usage));
    }

    GLuint handle() const noexcept { return buffer_; }
    bool is_valid() const noexcept { return buffer_ != 0; }

private:
    GLuint buffer_ = 0;
    Type type_;
};

} // namespace gtkgl::gl
